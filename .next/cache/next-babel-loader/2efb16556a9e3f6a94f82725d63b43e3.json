{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\fundi\\\\fundi_new\\\\fundi-next\\\\containers\\\\Category\\\\category.jsx\";\nvar __jsx = React.createElement;\nimport React, { Component, Fragment } from 'react';\nimport CMS from '../../lib/api';\nimport Head from 'next/head';\nimport CategoryFilter from '../../components/Category/CategoryFilter';\nimport SearchList from '../../components/Search/SearchList';\nimport { isMobile } from 'react-device-detect';\n\nvar Category =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Category, _Component);\n\n  function Category(props) {\n    var _this;\n\n    _classCallCheck(this, Category);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Category).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeSearchOrder\", function (event) {\n      var orderBy = '';\n      var orderType = '';\n\n      if (event.currentTarget.value == 1) {\n        orderBy = 'regular_price';\n        orderType = 'ASC';\n      }\n\n      if (event.currentTarget.value == 2) {\n        orderBy = 'regular_price';\n        orderType = 'DESC';\n      }\n\n      if (event.currentTarget.value == 3) {\n        orderBy = 'discount_percent';\n        orderType = 'DESC';\n      }\n\n      _this.setState({\n        orderBy: orderBy,\n        orderType: orderType,\n        currentPage: 1\n      });\n\n      var queryCondition = {\n        'name': _this.props.searchName,\n        'cat_name': _this.props.catUrl,\n        'page': _this.state.currentPage,\n        'min_price': _this.state.minPrice,\n        'max_price': _this.state.maxPrice,\n        'order_by': orderBy,\n        'order_type': orderType\n      };\n\n      _this.getProductsByCondition(queryCondition, true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangePriceRange\", function (event) {\n      var minPrice = '';\n      var maxPrice = '';\n\n      if (event.currentTarget.value == 1) {\n        maxPrice = 500000;\n      }\n\n      if (event.currentTarget.value == 2) {\n        minPrice = 500000;\n        maxPrice = 1000000;\n      }\n\n      if (event.currentTarget.value == 3) {\n        minPrice = 1000000;\n        maxPrice = 5000000;\n      }\n\n      if (event.currentTarget.value == 4) {\n        minPrice = 5000000;\n        maxPrice = 10000000;\n      }\n\n      if (event.currentTarget.value == 5) {\n        minPrice = 10000000;\n      }\n\n      _this.setState({\n        minPrice: minPrice,\n        maxPrice: maxPrice,\n        currentPage: 1\n      });\n\n      var queryCondition = {\n        'name': _this.props.searchName,\n        'cat_name': _this.props.catUrl,\n        'page': _this.state.currentPage,\n        'min_price': minPrice,\n        'max_price': maxPrice,\n        'orderBy': _this.state.orderBy,\n        'orderType': _this.state.orderType\n      };\n\n      _this.getProductsByCondition(queryCondition, true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showMore\", function (event) {\n      var currentPage = _this.state.currentPage;\n      var queryCondition = {\n        'name': _this.props.searchName,\n        'cat_name': _this.props.catUrl,\n        'page': currentPage + 1,\n        'per_page': 20,\n        'order_by': _this.state.orderBy,\n        'order_type': _this.state.orderType,\n        'min_price': _this.state.minPrice,\n        'max_price': _this.state.maxPrice\n      };\n\n      _this.getProductsByCondition(queryCondition, false);\n    });\n\n    _this.state = {\n      currentPage: 1,\n      total: 0,\n      products: _this.props.products,\n      orderBy: '',\n      orderType: '',\n      minPrice: '',\n      maxPrice: '',\n      catName: '',\n      hideShowMore: 0,\n      post: {},\n      comments: []\n    };\n    return _this;\n  }\n\n  _createClass(Category, [{\n    key: \"mobileCheck\",\n    value: function mobileCheck() {\n      return isMobile;\n    }\n  }, {\n    key: \"getParameterByName\",\n    value: function getParameterByName(name, url) {\n      if (!url) url = window.location.href;\n      name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n      var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n          results = regex.exec(url);\n      if (!results) return null;\n      if (!results[2]) return '';\n      return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n    }\n  }, {\n    key: \"getProductsByCondition\",\n    value: function getProductsByCondition(queryCondition) {\n      var _this2 = this;\n\n      var isResetPageNumber = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var products = this.state.products;\n      var currentPage = this.state.currentPage;\n      CMS.getProducts(queryCondition).then(function (response) {\n        if (!isResetPageNumber) {\n          _this2.setState({\n            products: _this2.state.products.concat(response.data.data),\n            total: response.data.pagination && response.data.pagination.total,\n            currentPage: currentPage + 1\n          });\n        } else {\n          _this2.setState({\n            products: response.data.data,\n            total: response.data.pagination && response.data.pagination.total\n          });\n        }\n\n        if (response.data.pagination && response.data.pagination.current_page == response.data.pagination.total_page) {\n          _this2.setState({\n            hideShowMore: 1\n          });\n        } else {\n          _this2.setState({\n            hideShowMore: 0\n          });\n        }\n      });\n    }\n  }, {\n    key: \"getPost\",\n    value: function getPost(slug) {\n      var _this3 = this;\n\n      CMS.getPosts(slug).then(function (response) {\n        _this3.setState({\n          post: response.data[0]\n        });\n\n        CMS.getComments(response.data[0].id).then(function (response) {\n          _this3.setState({\n            comments: response.data\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, __jsx(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, __jsx(\"link\", {\n        key: \"shortcut_icon\",\n        rel: \"shortcut icon\",\n        href: \"/assets/images/fundi-logo.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), __jsx(\"link\", {\n        key: \"apple-touch-icon\",\n        rel: \"apple-touch-icon\",\n        href: \"/assets/images/fundi-logo.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }), __jsx(\"title\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Danh mục \" + this.props.catName), __jsx(\"meta\", {\n        name: \"description\",\n        content: \"Kết quả thuộc \" + this.props.catName + \": \" + \" sản phẩm giảm giá trên Fundi.vn\" + \". Khuyến mãi HOT, coupon giảm giá, bài review để mua hàng tại Lazada, Tiki, Adayroi, Lotte, FPT shop, Nguyễn Kim và các sàn TMĐT khác.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      })), __jsx(CategoryFilter, _extends({}, this.props, {\n        categories: this.props.categories,\n        total: this.props.total,\n        onChangePriceRange: this.onChangePriceRange,\n        onChangeSearchOrder: this.onChangeSearchOrder,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      })), __jsx(SearchList, _extends({}, this.props, {\n        products: this.props.products,\n        mobileCheck: this.mobileCheck,\n        showMore: this.showMore,\n        hideShowMore: this.state.hideShowMore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Category;\n}(Component);\n\nexport default Category;","map":{"version":3,"sources":["D:/xampp/htdocs/fundi/fundi_new/fundi-next/containers/Category/category.jsx"],"names":["React","Component","Fragment","CMS","Head","CategoryFilter","SearchList","isMobile","Category","props","event","orderBy","orderType","currentTarget","value","setState","currentPage","queryCondition","searchName","catUrl","state","minPrice","maxPrice","getProductsByCondition","total","products","catName","hideShowMore","post","comments","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","isResetPageNumber","getProducts","then","response","concat","data","pagination","current_page","total_page","slug","getPosts","getComments","id","categories","onChangePriceRange","onChangeSearchOrder","mobileCheck","showMore"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,OAAOC,GAAP,MAAgB,eAAhB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,UAAP,MAAuB,oCAAvB;AACA,SAAQC,QAAR,QAAuB,qBAAvB;;IAEMC,Q;;;;;AACF,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,kFAAMA,KAAN;;AADe,0EA2EG,UAACC,KAAD,EAAW;AAC7B,UAAIC,OAAO,GAAG,EAAd;AACA,UAAIC,SAAS,GAAG,EAAhB;;AAEA,UAAGF,KAAK,CAACG,aAAN,CAAoBC,KAApB,IAA6B,CAAhC,EAAmC;AAC/BH,QAAAA,OAAO,GAAG,eAAV;AACAC,QAAAA,SAAS,GAAG,KAAZ;AACH;;AAED,UAAGF,KAAK,CAACG,aAAN,CAAoBC,KAApB,IAA6B,CAAhC,EAAmC;AAC/BH,QAAAA,OAAO,GAAG,eAAV;AACAC,QAAAA,SAAS,GAAG,MAAZ;AACH;;AAEA,UAAGF,KAAK,CAACG,aAAN,CAAoBC,KAApB,IAA6B,CAAhC,EAAmC;AAChCH,QAAAA,OAAO,GAAG,kBAAV;AACAC,QAAAA,SAAS,GAAG,MAAZ;AACF;;AAED,YAAKG,QAAL,CAAc;AACXJ,QAAAA,OAAO,EAAEA,OADE;AAEXC,QAAAA,SAAS,EAAGA,SAFD;AAGXI,QAAAA,WAAW,EAAG;AAHH,OAAd;;AAMD,UAAIC,cAAc,GAAI;AAClB,gBAAS,MAAKR,KAAL,CAAWS,UADF;AAElB,oBAAa,MAAKT,KAAL,CAAWU,MAFN;AAGlB,gBAAS,MAAKC,KAAL,CAAWJ,WAHF;AAIlB,qBAAa,MAAKI,KAAL,CAAWC,QAJN;AAKlB,qBAAc,MAAKD,KAAL,CAAWE,QALP;AAMlB,oBAAaX,OANK;AAOlB,sBAAeC;AAPG,OAAtB;;AAUA,YAAKW,sBAAL,CAA4BN,cAA5B,EAA2C,IAA3C;AACH,KA/GkB;;AAAA,yEAiHC,UAACP,KAAD,EAAW;AAC3B,UAAIW,QAAQ,GAAG,EAAf;AACA,UAAIC,QAAQ,GAAG,EAAf;;AAEA,UAAGZ,KAAK,CAACG,aAAN,CAAoBC,KAApB,IAA6B,CAAhC,EAAmC;AAC/BQ,QAAAA,QAAQ,GAAG,MAAX;AACH;;AAED,UAAGZ,KAAK,CAACG,aAAN,CAAoBC,KAApB,IAA6B,CAAhC,EAAmC;AAC/BO,QAAAA,QAAQ,GAAG,MAAX;AACAC,QAAAA,QAAQ,GAAG,OAAX;AACH;;AAEA,UAAGZ,KAAK,CAACG,aAAN,CAAoBC,KAApB,IAA6B,CAAhC,EAAmC;AAChCO,QAAAA,QAAQ,GAAG,OAAX;AACAC,QAAAA,QAAQ,GAAG,OAAX;AACF;;AAED,UAAGZ,KAAK,CAACG,aAAN,CAAoBC,KAApB,IAA6B,CAAhC,EAAmC;AAC/BO,QAAAA,QAAQ,GAAG,OAAX;AACAC,QAAAA,QAAQ,GAAG,QAAX;AACH;;AAED,UAAGZ,KAAK,CAACG,aAAN,CAAoBC,KAApB,IAA6B,CAAhC,EAAmC;AAC/BO,QAAAA,QAAQ,GAAG,QAAX;AACH;;AACD,YAAKN,QAAL,CAAc;AACXM,QAAAA,QAAQ,EAAEA,QADC;AAEXC,QAAAA,QAAQ,EAAGA,QAFA;AAGXN,QAAAA,WAAW,EAAG;AAHH,OAAd;;AAMD,UAAIC,cAAc,GAAI;AAClB,gBAAS,MAAKR,KAAL,CAAWS,UADF;AAElB,oBAAa,MAAKT,KAAL,CAAWU,MAFN;AAGlB,gBAAS,MAAKC,KAAL,CAAWJ,WAHF;AAIlB,qBAAcK,QAJI;AAKlB,qBAAcC,QALI;AAMlB,mBAAW,MAAKF,KAAL,CAAWT,OANJ;AAOlB,qBAAc,MAAKS,KAAL,CAAWR;AAPP,OAAtB;;AAUA,YAAKW,sBAAL,CAA4BN,cAA5B,EAA2C,IAA3C;AACH,KA5JkB;;AAAA,+DA8JR,UAACP,KAAD,EAAW;AAEnB,UAAIM,WAAW,GAAG,MAAKI,KAAL,CAAWJ,WAA7B;AACA,UAAIC,cAAc,GAAI;AACpB,gBAAS,MAAKR,KAAL,CAAWS,UADA;AAEpB,oBAAa,MAAKT,KAAL,CAAWU,MAFJ;AAGpB,gBAASH,WAAW,GAAG,CAHH;AAIpB,oBAAa,EAJO;AAKpB,oBAAa,MAAKI,KAAL,CAAWT,OALJ;AAMpB,sBAAe,MAAKS,KAAL,CAAWR,SANN;AAOpB,qBAAc,MAAKQ,KAAL,CAAWC,QAPL;AAQpB,qBAAc,MAAKD,KAAL,CAAWE;AARL,OAAtB;;AAUA,YAAKC,sBAAL,CAA4BN,cAA5B,EAA2C,KAA3C;AACF,KA5KkB;;AAEf,UAAKG,KAAL,GAAa;AACTJ,MAAAA,WAAW,EAAG,CADL;AAETQ,MAAAA,KAAK,EAAG,CAFC;AAGTC,MAAAA,QAAQ,EAAG,MAAKhB,KAAL,CAAWgB,QAHb;AAITd,MAAAA,OAAO,EAAG,EAJD;AAKTC,MAAAA,SAAS,EAAG,EALH;AAMTS,MAAAA,QAAQ,EAAG,EANF;AAOTC,MAAAA,QAAQ,EAAG,EAPF;AAQTI,MAAAA,OAAO,EAAG,EARD;AASTC,MAAAA,YAAY,EAAG,CATN;AAUTC,MAAAA,IAAI,EAAG,EAVE;AAWTC,MAAAA,QAAQ,EAAG;AAXF,KAAb;AAFe;AAelB;;;;kCAEa;AACV,aAAOtB,QAAP;AACH;;;uCAEkBuB,I,EAAMC,G,EAAK;AAC1B,UAAI,CAACA,GAAL,EAAUA,GAAG,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAtB;AACVJ,MAAAA,IAAI,GAAGA,IAAI,CAACK,OAAL,CAAa,SAAb,EAAwB,MAAxB,CAAP;AACA,UAAIC,KAAK,GAAG,IAAIC,MAAJ,CAAW,SAASP,IAAT,GAAgB,mBAA3B,CAAZ;AAAA,UACIQ,OAAO,GAAGF,KAAK,CAACG,IAAN,CAAWR,GAAX,CADd;AAEA,UAAI,CAACO,OAAL,EAAc,OAAO,IAAP;AACd,UAAI,CAACA,OAAO,CAAC,CAAD,CAAZ,EAAiB,OAAO,EAAP;AACjB,aAAOE,kBAAkB,CAACF,OAAO,CAAC,CAAD,CAAP,CAAWH,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAAzB;AACH;;;2CAEsBlB,c,EACvB;AAAA;;AAAA,UADsCwB,iBACtC,uEAD0D,IAC1D;AACI,UAAIhB,QAAQ,GAAG,KAAKL,KAAL,CAAWK,QAA1B;AACA,UAAIT,WAAW,GAAG,KAAKI,KAAL,CAAWJ,WAA7B;AACAb,MAAAA,GAAG,CAACuC,WAAJ,CAAgBzB,cAAhB,EAAgC0B,IAAhC,CAAqC,UAAAC,QAAQ,EAAI;AAC7C,YAAG,CAACH,iBAAJ,EAAuB;AACrB,UAAA,MAAI,CAAC1B,QAAL,CAAc;AACVU,YAAAA,QAAQ,EAAE,MAAI,CAACL,KAAL,CAAWK,QAAX,CAAoBoB,MAApB,CAA2BD,QAAQ,CAACE,IAAT,CAAcA,IAAzC,CADA;AAEVtB,YAAAA,KAAK,EAAGoB,QAAQ,CAACE,IAAT,CAAcC,UAAd,IAA4BH,QAAQ,CAACE,IAAT,CAAcC,UAAd,CAAyBvB,KAFnD;AAGVR,YAAAA,WAAW,EAAEA,WAAW,GAAG;AAHjB,WAAd;AAKD,SAND,MAMO;AACF,UAAA,MAAI,CAACD,QAAL,CAAc;AACVU,YAAAA,QAAQ,EAAEmB,QAAQ,CAACE,IAAT,CAAcA,IADd;AAEVtB,YAAAA,KAAK,EAAGoB,QAAQ,CAACE,IAAT,CAAcC,UAAd,IAA4BH,QAAQ,CAACE,IAAT,CAAcC,UAAd,CAAyBvB;AAFnD,WAAd;AAIJ;;AAED,YAAGoB,QAAQ,CAACE,IAAT,CAAcC,UAAd,IAA4BH,QAAQ,CAACE,IAAT,CAAcC,UAAd,CAAyBC,YAAzB,IAAyCJ,QAAQ,CAACE,IAAT,CAAcC,UAAd,CAAyBE,UAAjG,EAA6G;AACzG,UAAA,MAAI,CAAClC,QAAL,CAAc;AACVY,YAAAA,YAAY,EAAG;AADL,WAAd;AAGH,SAJD,MAIM;AACJ,UAAA,MAAI,CAACZ,QAAL,CAAc;AACTY,YAAAA,YAAY,EAAG;AADN,WAAd;AAGD;AACJ,OAvBD;AAwBH;;;4BAEOuB,I,EAAM;AAAA;;AACV/C,MAAAA,GAAG,CAACgD,QAAJ,CAAaD,IAAb,EAAmBP,IAAnB,CAAwB,UAAAC,QAAQ,EAAI;AAChC,QAAA,MAAI,CAAC7B,QAAL,CAAc;AACVa,UAAAA,IAAI,EAAEgB,QAAQ,CAACE,IAAT,CAAc,CAAd;AADI,SAAd;;AAID3C,QAAAA,GAAG,CAACiD,WAAJ,CAAgBR,QAAQ,CAACE,IAAT,CAAc,CAAd,EAAiBO,EAAjC,EAAqCV,IAArC,CAA0C,UAAAC,QAAQ,EAAI;AAChD,UAAA,MAAI,CAAC7B,QAAL,CAAc;AACXc,YAAAA,QAAQ,EAAEe,QAAQ,CAACE;AADR,WAAd;AAGL,SAJD;AAKF,OAVD;AAWH;;;6BAqGQ;AAED,aACA,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAM,QAAA,GAAG,EAAC,eAAV;AAA0B,QAAA,GAAG,EAAC,eAA9B;AAA8C,QAAA,IAAI,EAAC,+BAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAM,QAAA,GAAG,EAAC,kBAAV;AAA6B,QAAA,GAAG,EAAC,kBAAjC;AAAoD,QAAA,IAAI,EAAC,+BAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAQ,cAAc,KAAKrC,KAAL,CAAWiB,OAAjC,CAHJ,EAII;AAAM,QAAA,IAAI,EAAC,aAAX;AAAyB,QAAA,OAAO,EAAE,mBAAmB,KAAKjB,KAAL,CAAWiB,OAA9B,GAAwC,IAAxC,GAA+C,kCAA/C,GAC5B,wIADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CADJ,EAQI,MAAC,cAAD,eAAoB,KAAKjB,KAAzB;AAAgC,QAAA,UAAU,EAAE,KAAKA,KAAL,CAAW6C,UAAvD;AAAoE,QAAA,KAAK,EAAE,KAAK7C,KAAL,CAAWe,KAAtF;AAA6F,QAAA,kBAAkB,EAAE,KAAK+B,kBAAtH;AACA,QAAA,mBAAmB,EAAE,KAAKC,mBAD1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SARJ,EAUI,MAAC,UAAD,eAAgB,KAAK/C,KAArB;AAA4B,QAAA,QAAQ,EAAI,KAAKA,KAAL,CAAWgB,QAAnD;AAA6D,QAAA,WAAW,EAAE,KAAKgC,WAA/E;AAA4F,QAAA,QAAQ,EAAE,KAAKC,QAA3G;AAAqH,QAAA,YAAY,EAAE,KAAKtC,KAAL,CAAWO,YAA9I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAVJ,CADA;AAcP;;;;EA/LkB1B,S;;AAkMvB,eAAeO,QAAf","sourcesContent":["import React, { Component, Fragment } from 'react';\r\n\r\nimport CMS from '../../lib/api';\r\nimport Head from 'next/head';\r\nimport CategoryFilter from '../../components/Category/CategoryFilter'\r\nimport SearchList from '../../components/Search/SearchList'\r\nimport {isMobile} from 'react-device-detect'\r\n\r\nclass Category extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentPage : 1,\r\n            total : 0,\r\n            products : this.props.products,\r\n            orderBy : '',\r\n            orderType : '',\r\n            minPrice : '',\r\n            maxPrice : '',\r\n            catName : '',\r\n            hideShowMore : 0,\r\n            post : {},\r\n            comments : [],\r\n        };\r\n    }\r\n\r\n    mobileCheck() {\r\n        return isMobile\r\n    }\r\n\r\n    getParameterByName(name, url) {\r\n        if (!url) url = window.location.href;\r\n        name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n        var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\r\n            results = regex.exec(url);\r\n        if (!results) return null;\r\n        if (!results[2]) return '';\r\n        return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n    }\r\n\r\n    getProductsByCondition(queryCondition,isResetPageNumber = true)\r\n    {\r\n        let products = this.state.products;\r\n        let currentPage = this.state.currentPage;\r\n        CMS.getProducts(queryCondition).then(response => {\r\n            if(!isResetPageNumber) {\r\n              this.setState({\r\n                  products: this.state.products.concat(response.data.data),\r\n                  total : response.data.pagination && response.data.pagination.total,\r\n                  currentPage: currentPage + 1,\r\n               });\r\n            } else {\r\n                 this.setState({\r\n                     products: response.data.data,\r\n                     total : response.data.pagination && response.data.pagination.total,\r\n                  });\r\n            }\r\n\r\n            if(response.data.pagination && response.data.pagination.current_page == response.data.pagination.total_page) {\r\n                this.setState({\r\n                    hideShowMore : 1\r\n                })\r\n            }else {\r\n              this.setState({\r\n                   hideShowMore : 0\r\n               })\r\n            }\r\n        });\r\n    }\r\n\r\n    getPost(slug) {\r\n        CMS.getPosts(slug).then(response => {\r\n            this.setState({\r\n                post: response.data[0],\r\n            });\r\n\r\n           CMS.getComments(response.data[0].id).then(response => {\r\n                 this.setState({\r\n                    comments: response.data,\r\n                });\r\n           })\r\n        });\r\n    }\r\n\r\n    onChangeSearchOrder = (event) => {\r\n        let orderBy = '';\r\n        let orderType = '';\r\n\r\n        if(event.currentTarget.value == 1) {\r\n            orderBy = 'regular_price';\r\n            orderType = 'ASC'\r\n        }\r\n\r\n        if(event.currentTarget.value == 2) {\r\n            orderBy = 'regular_price';\r\n            orderType = 'DESC'\r\n        }\r\n\r\n         if(event.currentTarget.value == 3) {\r\n            orderBy = 'discount_percent';\r\n            orderType = 'DESC'\r\n         }\r\n\r\n         this.setState({\r\n            orderBy: orderBy,\r\n            orderType : orderType,\r\n            currentPage : 1,\r\n         });\r\n\r\n        let queryCondition =  {\r\n            'name' : this.props.searchName,\r\n            'cat_name' : this.props.catUrl,\r\n            'page' : this.state.currentPage,\r\n            'min_price': this.state.minPrice,\r\n            'max_price' : this.state.maxPrice,\r\n            'order_by' : orderBy,\r\n            'order_type' : orderType,\r\n        };\r\n\r\n        this.getProductsByCondition(queryCondition,true);\r\n    }\r\n\r\n   onChangePriceRange = (event) => {\r\n        let minPrice = '';\r\n        let maxPrice = '';\r\n\r\n        if(event.currentTarget.value == 1) {\r\n            maxPrice = 500000;\r\n        }\r\n\r\n        if(event.currentTarget.value == 2) {\r\n            minPrice = 500000;\r\n            maxPrice = 1000000;\r\n        }\r\n\r\n         if(event.currentTarget.value == 3) {\r\n            minPrice = 1000000;\r\n            maxPrice = 5000000;\r\n         }\r\n\r\n         if(event.currentTarget.value == 4) {\r\n             minPrice = 5000000;\r\n             maxPrice = 10000000;\r\n         }\r\n\r\n         if(event.currentTarget.value == 5) {\r\n             minPrice = 10000000;\r\n         }\r\n         this.setState({\r\n            minPrice: minPrice,\r\n            maxPrice : maxPrice,\r\n            currentPage : 1,\r\n         });\r\n\r\n        let queryCondition =  {\r\n            'name' : this.props.searchName,\r\n            'cat_name' : this.props.catUrl,\r\n            'page' : this.state.currentPage,\r\n            'min_price' : minPrice,\r\n            'max_price' : maxPrice,\r\n            'orderBy': this.state.orderBy,\r\n            'orderType' : this.state.orderType,\r\n        };\r\n\r\n        this.getProductsByCondition(queryCondition,true);\r\n    }\r\n\r\n    showMore = (event) => {\r\n\r\n       let currentPage = this.state.currentPage;\r\n       let queryCondition =  {\r\n         'name' : this.props.searchName,\r\n         'cat_name' : this.props.catUrl,\r\n         'page' : currentPage + 1,\r\n         'per_page' : 20,\r\n         'order_by' : this.state.orderBy,\r\n         'order_type' : this.state.orderType,\r\n         'min_price' : this.state.minPrice,\r\n         'max_price' : this.state.maxPrice,\r\n       };\r\n       this.getProductsByCondition(queryCondition,false);\r\n    }\r\n\r\n    render() {\r\n        \r\n            return (\r\n            <Fragment>\r\n                <Head>\r\n                    <link key=\"shortcut_icon\" rel=\"shortcut icon\" href=\"/assets/images/fundi-logo.png\" />\r\n                    <link key=\"apple-touch-icon\" rel=\"apple-touch-icon\" href=\"/assets/images/fundi-logo.png\"/>  \r\n                    <title>{\"Danh mục \" + this.props.catName}</title>\r\n                    <meta name=\"description\" content={\"Kết quả thuộc \" + this.props.catName + \": \" + \" sản phẩm giảm giá trên Fundi.vn\"\r\n                        + \". Khuyến mãi HOT, coupon giảm giá, bài review để mua hàng tại Lazada, Tiki, Adayroi, Lotte, FPT shop, Nguyễn Kim và các sàn TMĐT khác.\"} />\r\n                </Head>\r\n                <CategoryFilter {...this.props} categories={this.props.categories } total={this.props.total} onChangePriceRange={this.onChangePriceRange}\r\n                onChangeSearchOrder={this.onChangeSearchOrder}/>\r\n                <SearchList {...this.props} products = {this.props.products} mobileCheck={this.mobileCheck} showMore={this.showMore} hideShowMore={this.state.hideShowMore} />\r\n            </Fragment>\r\n            );\r\n    }\r\n}\r\n\r\nexport default Category\r\n"]},"metadata":{},"sourceType":"module"}