{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component, Fragment } from 'react';\nimport Head from 'next/head';\nimport API from '../../lib/api/cms';\nimport Profile from '../../components/Customer/Profile';\nimport Configuration from '../../lib/api/configuration';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getCookie\", function (cookieName) {\n      console.log(cookieName);\n      var match = document.cookie.match(new RegExp('(^| )' + cookieName + '=([^;]+)'));\n      if (match) return match[2];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteCookie\", function (name) {\n      document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePageChange\", function (e) {\n      _this.setState({\n        page: e\n      });\n\n      _this.getOrderList(e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFilterChange\", function (e) {\n      var status = e.target.value;\n\n      _this.setState({\n        status: status\n      });\n\n      API.getOrderList(_this.state.page, status).then(function (response) {\n        _this.setState({\n          orderList: response.data\n        });\n      })[\"catch\"](function (error) {\n        var data = error.response;\n\n        if (data.data.messages) {\n          console.log(data.data.messages);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangePhone\", function (e) {\n      _this.setState({\n        phone_number: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeName\", function (e) {\n      _this.setState({\n        name: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmitUpdateAccount\", function () {\n      var data = {\n        name: _this.state.name,\n        phone_number: _this.state.phone_number,\n        gender: _this.state.gender ? _this.state.gender : \"M\"\n      };\n      API.updateUserDetail(data).then(function (response) {\n        _this.setState({\n          user: response.data,\n          phone_number: response.data.phone_number\n        });\n      })[\"catch\"](function (error) {\n        console.log(error);\n\n        if (data.messages) {\n          alert(data.messages);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeBankName\", function (e) {\n      _this.setState({\n        bank_name: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeBankAccount\", function (e) {\n      _this.setState({\n        bank_account: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeBank\", function (e) {\n      _this.setState({\n        bank_id: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmitUpdateBankAccount\", function () {\n      var data = {\n        name: _this.state.name,\n        gender: _this.state.gender ? _this.state.gender : \"M\",\n        bank_account_name: _this.state.bank_name,\n        bank_account_number: _this.state.bank_account,\n        bank_account_id: _this.state.bank_id\n      };\n      API.updateUserDetail(data).then(function (response) {\n        _this.setState({\n          user: response.data,\n          phone_number: response.data.phone_number\n        });\n      })[\"catch\"](function (error) {\n        console.log(error);\n\n        if (data.messages) {\n          alert(data.messages);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"logout\", function (e) {\n      _this.deleteCookie('api_token');\n\n      _this.deleteCookie('user_id');\n\n      window.location.href = \"/\";\n    });\n\n    _this.state = {\n      user: [],\n      orderList: [],\n      page: 0,\n      status: \"\",\n      phone_number: \"\",\n      name: \"\",\n      gender: \"\",\n      bank_name: \"\",\n      bank_account: \"\",\n      bank: \"\",\n      bank_id: \"\",\n      bankList: []\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(this.getCookie('api_token'));\n      Configuration.setHeader('Authorization', \"Bearer \".concat(this.getCookie('api_token')));\n      this.getUserDetail();\n      this.getOrderList();\n      this.getBankList();\n    }\n  }, {\n    key: \"getBankList\",\n    value: function getBankList() {\n      var _this2 = this;\n\n      API.getBankList().then(function (response) {\n        _this2.setState({\n          bankList: response.data.data\n        });\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"getUserDetail\",\n    value: function getUserDetail() {\n      var _this3 = this;\n\n      API.getUserDetail().then(function (response) {\n        _this3.setState({\n          user: response.data,\n          phone_number: response.data.phone_number,\n          name: response.data.name,\n          gender: response.data.gender,\n          bank_name: response.data.bank_account_name,\n          bank_account: response.data.bank_account_number,\n          bank_id: response.data.bank && response.data.bank.id\n        });\n      })[\"catch\"](function (error) {\n        var data = error.response;\n\n        if (data.data.messages) {\n          console.log(data.data.messages);\n        }\n      });\n    }\n  }, {\n    key: \"getOrderList\",\n    value: function getOrderList() {\n      var _this4 = this;\n\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      API.getOrderList(page, \"\").then(function (response) {\n        _this4.setState({\n          orderList: response.data\n        });\n      })[\"catch\"](function (error) {\n        var data = error.response;\n\n        if (data.data.messages) {\n          console.log(data.data.messages);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Fragment, null, __jsx(Head, null, __jsx(\"style\", null, \"body {\\n                            background: url(\".concat(this.state.backgroundImage, \") top center no-repeat fixed;\\n                            background-size: cover;\\n                        }\\n                        @media (max-width: 575.98px) {\\n                            #root > main {\\n                                padding-left: 0rem;\\n                            }\\n                        }\"))), __jsx(Profile, _extends({\n        orderList: this.state.orderList,\n        user: this.state.user,\n        logout: this.logout,\n        handleFilterChange: this.handleFilterChange,\n        handlePageChange: this.handlePageChange,\n        handleChangePhone: this.handleChangePhone,\n        handleSubmitUpdateAccount: this.handleSubmitUpdateAccount,\n        handleChangeName: this.handleChangeName,\n        handleSubmitUpdateBankAccount: this.handleSubmitUpdateBankAccount,\n        handleChangeBankName: this.handleChangeBankName,\n        handleChangeBankAccount: this.handleChangeBankAccount,\n        handleChangeBank: this.handleChangeBank\n      }, this.state)));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}