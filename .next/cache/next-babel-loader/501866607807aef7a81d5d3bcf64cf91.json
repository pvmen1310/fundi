{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n// Channels\nimport React, { Component, Fragment } from 'react';\nimport './login.scss';\nimport Popup from \"reactjs-popup\";\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport GoogleLogin from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\nimport API from '../../lib/api/cms';\nimport ReactGA from 'react-ga';\nimport TagManager from 'react-gtm-module';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyAYH-G8WKT-p-HL_OKwUGqLXUscgAe4kpE\",\n  authDomain: \"fir-fundi.firebaseapp.com\",\n  databaseURL: \"https://fir-fundi.firebaseio.com\",\n  projectId: \"firebase-fundi\",\n  storageBucket: \"firebase-fundi.appspot.com\",\n  messagingSenderId: \"72519489304\",\n  appId: \"1:72519489304:web:d7ba6bab43e6991648f06d\"\n}; //import 'react-tabs/style/react-tabs.css';\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n}\n\nexport var auth = firebase.auth();\nexport var firestore = firebase.firestore();\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"provider\", new firebase.auth.GoogleAuthProvider());\n\n    _defineProperty(_assertThisInitialized(_this), \"tagManagerArgs\", {\n      gtmId: 'UA-76030080-1'\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"responseGoogle\", function (e) {\n      auth.signInWithPopup(_this.provider).then(function (response) {\n        if (response) {\n          var data = {\n            social_token: response.credential && response.credential.idToken\n          };\n          API.loginSocial(data, 'google').then(function (response) {\n            if (response.data.api_token) {\n              console.log(response.data);\n\n              _this.createCookieInHour('api_token', response.data.api_token, 100000);\n\n              _this.createCookieInHour('user_id', response.data.data.id, 100000);\n\n              _this.setState({\n                openWindow: false\n              });\n\n              location.reload();\n            }\n          })[\"catch\"](function (error) {\n            var data = error.response;\n\n            if (data.data.messages) {\n              _this.setState({\n                errorMsg: data.data.messages\n              });\n            }\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"responseFacebook\", function (response) {\n      var data = {\n        social_token: response.accessToken\n      };\n      API.loginSocial(data, 'facebook').then(function (response) {\n        if (response.data.api_token) {\n          console.log(response.data);\n\n          _this.createCookieInHour('api_token', response.data.api_token, 100000);\n\n          _this.createCookieInHour('user_id', response.data.data.id, 100000);\n\n          _this.setState({\n            openWindow: false\n          });\n\n          location.reload();\n        }\n      })[\"catch\"](function (error) {\n        var data = error.response;\n\n        if (data.data.messages) {\n          _this.setState({\n            errorMsg: data.data.messages\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeName\", function (e) {\n      _this.setState({\n        name: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeEmail\", function (e) {\n      _this.setState({\n        email: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangePassword\", function (e) {\n      _this.setState({\n        password: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmitLogin\", function (e) {\n      var data = {\n        email: _this.state.email,\n        password: _this.state.password\n      };\n      API.login(data).then(function (response) {\n        if (response.data.api_token) {\n          _this.createCookieInHour('api_token', response.data.api_token, 100000);\n\n          _this.createCookieInHour('user_id', response.data.data.id, 100000);\n\n          _this.setState({\n            openWindow: false\n          });\n\n          location.reload();\n        }\n      })[\"catch\"](function (error) {\n        var data = error.response;\n\n        if (data.data.messages) {\n          _this.setState({\n            errorMsgEmail: data.data.messages && data.data.messages.email,\n            errorMsgPassword: data.data.messages && data.data.messages.password,\n            errorMsg: data.data.messages && data.data.messages[0]\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"createCookieInHour\", function (cookieName, cookieValue, hourToExpire) {\n      var date = new Date();\n      date.setTime(date.getTime() + hourToExpire * 60 * 60 * 1000);\n      document.cookie = cookieName + \" = \" + cookieValue + \"; expires = \" + date.toGMTString();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmitRegister\", function (e) {\n      var data = {\n        email: _this.state.email,\n        password: _this.state.password,\n        name: _this.state.name\n      }; // ReactGA.event({\n      //     category: \"Tracking\",\n      //     action: \"Sign up Completed\",\n      //     label: \"Tracking users every time they register in.\",\n      //     nonInteraction: true\n      //   });\n\n      window.dataLayer = window.dataLayer || [];\n      window.dataLayer.push({\n        'formLocation': 'register',\n        'event': 'signUpComplete'\n      });\n      API.register(data).then(function (response) {\n        if (response.data.api_token) {\n          _this.createCookieInHour('api_token', response.data.api_token, 100000);\n\n          _this.createCookieInHour('user_id', response.data.data.id, 100000);\n\n          _this.setState({\n            openWindow: false\n          });\n\n          location.reload();\n        }\n      })[\"catch\"](function (error) {\n        console.log(error.response);\n        var data = error.response;\n\n        if (data.data.messages) {\n          _this.setState({\n            errorMsgEmail: data.data.messages && data.data.messages.email,\n            errorMsgPassword: data.data.messages && data.data.messages.password,\n            errorMsg: data.data.messages && data.data.messages[0]\n          });\n        }\n      });\n    });\n\n    _this.state = {\n      showTabLogin: true,\n      email: '',\n      password: '',\n      name: '',\n      errorMsg: '',\n      openWindow: true,\n      errorMsgEmail: '',\n      errorMsgPassword: ''\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Popup, {\n        open: this.state.openWindow,\n        modal: true,\n        nested: true,\n        position: \"top center\"\n      }, function (close) {\n        return __jsx(\"div\", {\n          className: \"modal\"\n        }, __jsx(\"span\", {\n          className: \"close\",\n          onClick: function onClick() {\n            close;\n\n            _this2.props.showLoginPage();\n          }\n        }, \"X\"), __jsx(\"div\", {\n          className: \"header\"\n        }), __jsx(\"div\", {\n          className: \"content row\"\n        }, _this2.state.showTabLogin ? __jsx(\"div\", {\n          className: \"col-md-5\"\n        }, __jsx(\"br\", null), __jsx(\"span\", {\n          style: {\n            fontWeight: '600',\n            fontSize: '20px',\n            marginTop: '10px'\n          }\n        }, \"\\u0110\\u0103ng nh\\u1EADp\"), __jsx(\"br\", null), __jsx(\"br\", null), __jsx(\"span\", null, \"\\u0110\\u0103ng nh\\u1EADp \\u0111\\u1EC3 theo d\\xF5i ,qu\\u1EA3n l\\xFD c\\xE1c s\\u1EA3n ph\\u1EA9m y\\xEAu th\\xEDch, nh\\u1EADn tin t\\u1EE9c khuy\\u1EBFn m\\xE3i \\u01B0u \\u0111\\xE3i s\\u1EDBm nh\\u1EA5t\"), __jsx(\"br\", null), __jsx(\"br\", null), __jsx(\"img\", {\n          className: \"mr-1\",\n          style: {\n            marginLeft: '29px'\n          },\n          src: \"/assets/images/login-icon.png\"\n        })) : __jsx(\"div\", {\n          className: \"col-md-5\"\n        }, __jsx(\"br\", null), __jsx(\"span\", {\n          style: {\n            fontWeight: '600',\n            fontSize: '20px',\n            marginTop: '10px'\n          }\n        }, \"T\\u1EA1o t\\xE0i kho\\u1EA3n\"), __jsx(\"br\", null), __jsx(\"br\", null), __jsx(\"span\", null, \"T\\u1EA1o t\\xE0i kho\\u1EA3n \\u0111\\u1EC3 theo d\\xF5i, qu\\u1EA3n l\\xFD c\\xE1c s\\u1EA3n ph\\u1EA9m y\\xEAu th\\xEDch , nh\\u1EADn tin t\\u1EE9c khuy\\u1EBFn m\\xE3i \\u01B0u \\u0111\\xE3i s\\u1EDBm nh\\u1EA5t\"), __jsx(\"br\", null), __jsx(\"br\", null), __jsx(\"img\", {\n          className: \"mr-1\",\n          style: {\n            marginLeft: '29px'\n          },\n          src: \"/assets/images/login-icon.png\"\n        })), __jsx(\"div\", {\n          className: \"col-md-7\"\n        }, __jsx(Tabs, null, __jsx(TabList, null, __jsx(Tab, {\n          onClick: function onClick() {\n            _this2.setState({\n              showTabLogin: true,\n              errorMsg: ''\n            });\n          }\n        }, \"\\u0110\\u0103ng nh\\u1EADp\"), __jsx(Tab, {\n          onClick: function onClick() {\n            _this2.setState({\n              showTabLogin: false,\n              errorMsg: ''\n            });\n          }\n        }, \"T\\u1EA1o t\\xE0i kho\\u1EA3n\")), __jsx(TabPanel, null, _this2.state.errorMsg && __jsx(\"div\", {\n          className: \"row\"\n        }, __jsx(\"span\", {\n          style: {\n            color: 'red',\n            marginBottom: '-30px',\n            marginLeft: '78px'\n          }\n        }, _this2.state.errorMsg)), _this2.state.errorMsgEmail && __jsx(\"div\", {\n          className: \"row\"\n        }, __jsx(\"span\", {\n          style: {\n            color: 'red',\n            marginBottom: '-30px',\n            marginLeft: '78px'\n          }\n        }, _this2.state.errorMsgEmail)), _this2.state.errorMsgPassword && !_this2.state.errorMsgEmail && __jsx(\"div\", {\n          className: \"row\"\n        }, __jsx(\"span\", {\n          style: {\n            color: 'red',\n            marginTop: \"10px\",\n            marginBottom: '-30px',\n            marginLeft: '78px'\n          }\n        }, _this2.state.errorMsgPassword)), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '30px'\n          }\n        }, __jsx(\"label\", {\n          className: \"col-md-2 mt-1\"\n        }, \"Email\"), \" \", __jsx(\"input\", {\n          placeholder: \"Nh\\u1EADp email\",\n          value: _this2.state.email,\n          onChange: _this2.handleChangeEmail,\n          required: true,\n          className: \"form-control col-md-8\",\n          type: \"text\"\n        })), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(\"label\", {\n          className: \"col-md-2 mt-1\"\n        }, \"M\\u1EADt kh\\u1EA9u\"), \" \", __jsx(\"input\", {\n          placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",\n          value: _this2.state.password,\n          onChange: _this2.handleChangePassword,\n          required: true,\n          className: \"form-control col-md-8\",\n          type: \"password\"\n        })), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '5px'\n          }\n        }), __jsx(\"div\", {\n          className: \"row no-margin-top-mobile\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(\"button\", {\n          className: \"col-md-8 no-margin\",\n          onClick: function onClick() {\n            return _this2.handleSubmitLogin();\n          },\n          style: {\n            backgroundColor: \"#ff9340\",\n            marginLeft: '75px'\n          }\n        }, \"\\u0110\\u0103ng nh\\u1EADp\")), __jsx(\"div\", {\n          className: \"row hidden-in-mobile\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(\"span\", {\n          style: {\n            marginLeft: \"13rem\"\n          }\n        }, \"Ho\\u1EB7c\")), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(FacebookLogin, {\n          appId: \"580469216218491\",\n          fields: \"name,email,picture\",\n          buttonText: \"\\u0110\\u0103ng nh\\u1EADp b\\u1EB1ng Facebook\",\n          render: function render(renderProps) {\n            return __jsx(\"button\", {\n              className: \"col-md-8 fa fa-facebook no-margin\",\n              style: {\n                backgroundColor: \"#3b5998\",\n                marginLeft: '75px',\n                paddingTop: '1px',\n                paddingBottom: '1px'\n              },\n              onClick: renderProps.onClick\n            }, __jsx(\"img\", {\n              style: {\n                \"float\": \"left\"\n              },\n              src: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDYuODI3IDYuODI3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIj48cmVjdCBjbGFzcz0iZmlsMCIgd2lkdGg9IjYuODI3IiBoZWlnaHQ9IjYuODI3IiByeD0iMS40NTYiIHJ5PSIxLjQ1NiIgZmlsbD0iIzNiNTk5OCIvPjxwYXRoIGNsYXNzPSJmaWwxIiBkPSJNNC4xOTcgMy41MTNIMy42NXYyLjAwNGgtLjgzVjMuNTEzaC0uMzk0di0uNzA0aC4zOTR2LS40NTZjMC0uMzI2LjE1NS0uODM2LjgzNi0uODM2bC42MTQuMDAydi42ODRoLS40NDZjLS4wNzMgMC0uMTc1LjAzNi0uMTc1LjE5MnYuNDE0aC42MmwtLjA3My43MDR6IiBmaWxsPSIjZmZmIi8+PC9zdmc+\"\n            }), __jsx(\"span\", {\n              style: {\n                lineHeight: '30px'\n              }\n            }, \"\\u0110\\u0103ng nh\\u1EADp b\\u1EB1ng Facebook\"));\n          },\n          callback: _this2.responseFacebook\n        })), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(\"button\", {\n          className: \"col-md-8 no-margin\",\n          style: {\n            backgroundColor: \"#bf2f2f\",\n            marginLeft: '75px'\n          },\n          onClick: _this2.responseGoogle\n        }, __jsx(\"img\", {\n          style: {\n            \"float\": \"left\",\n            height: \"22px\",\n            marginLeft: \"2px\"\n          },\n          src: \"/assets/images/googleplus.png\"\n        }), \"\\u0110\\u0103ng nh\\u1EADp b\\u1EB1ng Gmail\"))), __jsx(TabPanel, null, _this2.state.errorMsg && __jsx(\"div\", {\n          className: \"row\"\n        }, __jsx(\"span\", {\n          style: {\n            color: 'red',\n            marginBottom: '-30px',\n            marginLeft: '90px'\n          }\n        }, _this2.state.errorMsg)), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '30px'\n          }\n        }, __jsx(\"label\", {\n          className: \"col-md-2 mt-1\"\n        }, \"H\\u1ECD t\\xEAn \"), \" \", __jsx(\"input\", {\n          placeholder: \"Nh\\u1EADp h\\u1ECD t\\xEAn\",\n          value: _this2.state.name,\n          onChange: _this2.handleChangeName,\n          className: \"form-control col-md-8\",\n          type: \"text\"\n        })), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(\"label\", {\n          className: \"col-md-2 mt-1\"\n        }, \"Email\"), \" \", __jsx(\"input\", {\n          placeholder: \"Nh\\u1EADp email\",\n          value: _this2.state.email,\n          onChange: _this2.handleChangeEmail,\n          required: true,\n          className: \"form-control col-md-8\",\n          type: \"text\"\n        })), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(\"label\", {\n          className: \"col-md-2 mt-1\"\n        }, \"M\\u1EADt kh\\u1EA9u\"), \" \", __jsx(\"input\", {\n          placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",\n          value: _this2.state.password,\n          onChange: _this2.handleChangePassword,\n          required: true,\n          className: \"form-control col-md-8\",\n          type: \"password\"\n        })), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(\"button\", {\n          className: \"col-md-8 \",\n          onClick: function onClick() {\n            return _this2.handleSubmitRegister();\n          },\n          style: {\n            backgroundColor: \"#ff9340\",\n            marginLeft: '75px'\n          }\n        }, \"T\\u1EA1o t\\xE0i kho\\u1EA3n\")), __jsx(\"div\", {\n          className: \"row\",\n          style: {\n            marginTop: '10px'\n          }\n        }, __jsx(\"span\", {\n          style: {\n            marginLeft: '75px'\n          }\n        }, \"\\u0110\\u0103ng k\\xED l\\xE0 b\\u1EA1n \\u0111\\xE3 \\u0111\\u1ED3ng \\xFD v\\u1EDBi \", __jsx(\"a\", {\n          target: \"_blank\",\n          href: \"https://fundi.vn/khong-tin-duoc-fundi-shopback-hoan-tien-khi-mua-hang-online/\\r\\n\"\n        }, \"\\u0110i\\u1EC1u kho\\u1EA3n s\\u1EED d\\u1EE5ng Fundi.vn\"))))))));\n      });\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}