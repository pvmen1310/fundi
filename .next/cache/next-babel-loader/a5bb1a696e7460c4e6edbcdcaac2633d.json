{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\fundi\\\\fundi_new\\\\fundi-next\\\\containers\\\\Account\\\\account.jsx\";\nvar __jsx = React.createElement;\nimport React, { Component, Fragment } from 'react';\nimport Head from 'next/head';\nimport API from '../../lib/api/cms';\nimport Profile from '../../components/Customer/Profile';\nimport Configuration from '../../lib/api/configuration';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getCookie\", cookieName => {\n      console.log(cookieName);\n      var match = document.cookie.match(new RegExp('(^| )' + cookieName + '=([^;]+)'));\n      if (match) return match[2];\n    });\n\n    _defineProperty(this, \"deleteCookie\", name => {\n      document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n    });\n\n    _defineProperty(this, \"handlePageChange\", e => {\n      this.setState({\n        page: e\n      });\n      this.getOrderList(e);\n    });\n\n    _defineProperty(this, \"handleFilterChange\", e => {\n      let status = e.target.value;\n      this.setState({\n        status: status\n      });\n      API.getOrderList(this.state.page, status).then(response => {\n        this.setState({\n          orderList: response.data\n        });\n      }).catch(error => {\n        var data = error.response;\n\n        if (data.data.messages) {\n          console.log(data.data.messages);\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleChangePhone\", e => {\n      this.setState({\n        phone_number: e.target.value\n      });\n    });\n\n    _defineProperty(this, \"handleChangeName\", e => {\n      this.setState({\n        name: e.target.value\n      });\n    });\n\n    _defineProperty(this, \"handleSubmitUpdateAccount\", () => {\n      let data = {\n        name: this.state.name,\n        phone_number: this.state.phone_number,\n        gender: \"\"\n      };\n      API.updateUserDetail(data).then(response => {\n        this.setState({\n          user: response.data,\n          phone_number: response.data.phone_number\n        });\n      }).catch(error => {\n        var data = error.response;\n\n        if (data.data.messages) {\n          console.log(data.data.messages);\n        }\n      });\n    });\n\n    _defineProperty(this, \"logout\", e => {\n      this.deleteCookie('api_token');\n      this.deleteCookie('user_id');\n      window.location.href = \"/\";\n    });\n\n    this.state = {\n      user: [],\n      orderList: [],\n      page: 0,\n      status: \"\",\n      phone_number: \"\",\n      name: \"\"\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.getCookie('api_token'));\n    Configuration.setHeader('Authorization', `Bearer ${this.getCookie('api_token')}`);\n    this.getUserDetail();\n    this.getOrderList();\n  }\n\n  getUserDetail() {\n    API.getUserDetail().then(response => {\n      this.setState({\n        user: response.data,\n        phone_number: response.data.phone_number,\n        name: response.data.name\n      });\n    }).catch(error => {\n      var data = error.response;\n\n      if (data.data.messages) {\n        console.log(data.data.messages);\n      }\n    });\n  }\n\n  getOrderList(page = 1) {\n    API.getOrderList(page, \"\").then(response => {\n      this.setState({\n        orderList: response.data\n      });\n    }).catch(error => {\n      var data = error.response;\n\n      if (data.data.messages) {\n        console.log(data.data.messages);\n      }\n    });\n  }\n\n  render() {\n    return __jsx(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, __jsx(\"style\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, `body {\n                            background: url(${this.state.backgroundImage}) top center no-repeat fixed;\n                            background-size: cover;\n                        }\n                        @media (max-width: 575.98px) {\n                            #root > main {\n                                padding-left: 0rem;\n                            }\n                        }`)), __jsx(Profile, _extends({\n      orderList: this.state.orderList,\n      user: this.state.user,\n      logout: this.logout,\n      handleFilterChange: this.handleFilterChange,\n      handlePageChange: this.handlePageChange,\n      handleChangePhone: this.handleChangePhone,\n      handleSubmitUpdateAccount: this.handleSubmitUpdateAccount,\n      handleChangeName: this.handleChangeName\n    }, this.state, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["D:/xampp/htdocs/fundi/fundi_new/fundi-next/containers/Account/account.jsx"],"names":["React","Component","Fragment","Head","API","Profile","Configuration","Home","constructor","props","cookieName","console","log","match","document","cookie","RegExp","name","e","setState","page","getOrderList","status","target","value","state","then","response","orderList","data","catch","error","messages","phone_number","gender","updateUserDetail","user","deleteCookie","window","location","href","componentDidMount","getCookie","setHeader","getUserDetail","render","backgroundImage","logout","handleFilterChange","handlePageChange","handleChangePhone","handleSubmitUpdateAccount","handleChangeName"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport Head from 'next/head'\r\nimport API from '../../lib/api/cms';\r\nimport Profile from '../../components/Customer/Profile';\r\nimport Configuration from '../../lib/api/configuration'\r\n\r\nclass Home extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: [],\r\n            orderList : [],        \r\n            page : 0,\r\n            status : \"\",\r\n            phone_number : \"\",\r\n            name : \"\"\r\n        };\r\n    }\r\n\r\n    getCookie = (cookieName) => {\r\n        console.log(cookieName);\r\n        var match = document.cookie.match(new RegExp('(^| )' + cookieName + '=([^;]+)'));\r\n        if (match) return match[2];\r\n    }\r\n\r\n    deleteCookie = (name) => {\r\n        document.cookie = name +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n      }\r\n\r\n    componentDidMount() {\r\n        console.log(this.getCookie('api_token'))\r\n        Configuration.setHeader('Authorization', `Bearer ${this.getCookie('api_token')}`);\r\n        this.getUserDetail();\r\n        this.getOrderList();\r\n    }\r\n\r\n    getUserDetail() {\r\n        API.getUserDetail().then(response => {\r\n            this.setState({\r\n                user : response.data,\r\n                phone_number : response.data.phone_number,\r\n                name: response.data.name\r\n            })\r\n        }).catch(error => {\r\n            var data = error.response;\r\n            if(data.data.messages) {\r\n               console.log(data.data.messages)\r\n            }\r\n        });\r\n    }\r\n\r\n    getOrderList(page = 1) {\r\n         API.getOrderList(page,\"\").then(response => {\r\n            this.setState({\r\n                orderList : response.data\r\n            })\r\n        }).catch(error => {\r\n            var data = error.response;\r\n            if(data.data.messages) {\r\n               console.log(data.data.messages)\r\n            }\r\n        });\r\n    }\r\n\r\n    handlePageChange = (e) => {\r\n        this.setState({\r\n            page : e\r\n        })\r\n        this.getOrderList(e);\r\n    }\r\n\r\n    handleFilterChange = (e) => {\r\n        let status = e.target.value;\r\n        this.setState({\r\n            status : status\r\n        })\r\n        API.getOrderList(this.state.page,status).then(response => {\r\n            this.setState({\r\n                orderList : response.data\r\n            })\r\n        }).catch(error => {\r\n            var data = error.response;\r\n            if(data.data.messages) {\r\n               console.log(data.data.messages)\r\n            }\r\n        });\r\n    }\r\n\r\n    handleChangePhone = (e) => {\r\n        this.setState({\r\n            phone_number : e.target.value\r\n        })\r\n    }\r\n\r\n    handleChangeName = (e) => {\r\n        this.setState({\r\n            name : e.target.value\r\n        })\r\n    }\r\n\r\n    handleSubmitUpdateAccount = () => {\r\n        let data = {\r\n            name: this.state.name,\r\n            phone_number: this.state.phone_number,\r\n            gender : \"\"\r\n        }\r\n\r\n        API.updateUserDetail(data).then(response => {\r\n            this.setState({\r\n                user : response.data,\r\n                phone_number : response.data.phone_number\r\n            })\r\n        }).catch(error => {\r\n            var data = error.response;\r\n            if(data.data.messages) {\r\n               console.log(data.data.messages)\r\n            }\r\n        });\r\n    }\r\n\r\n    logout = (e) => {\r\n        this.deleteCookie('api_token');\r\n        this.deleteCookie('user_id');\r\n        window.location.href = \"/\";\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Fragment>\r\n                <Head>\r\n                    <style>\r\n                        {`body {\r\n                            background: url(${this.state.backgroundImage}) top center no-repeat fixed;\r\n                            background-size: cover;\r\n                        }\r\n                        @media (max-width: 575.98px) {\r\n                            #root > main {\r\n                                padding-left: 0rem;\r\n                            }\r\n                        }`}\r\n                    </style>\r\n                </Head>\r\n                <Profile orderList={this.state.orderList} user={this.state.user} logout={this.logout} \r\n                handleFilterChange={this.handleFilterChange}\r\n                handlePageChange={this.handlePageChange}\r\n                handleChangePhone={this.handleChangePhone}\r\n                handleSubmitUpdateAccount={this.handleSubmitUpdateAccount}\r\n                handleChangeName={this.handleChangeName}\r\n                {...this.state}\r\n                />\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home\r\n"]},"metadata":{},"sourceType":"module"}